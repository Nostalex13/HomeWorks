"use strict";window.onload=function(){function e(e,t){var r=this;this.currentValue=1,this.list=e.querySelector(".slider__list"),this.sliderLength=e.querySelectorAll(".slider__item").length,this.itemWidth=300,this.currentPos=0,function(){var e=r.sliderLength*r.itemWidth;r.list.style.width=e+"px"}(),function(){for(var e="images/sliders/slider"+t+"/",n=r.list.querySelectorAll(".slider__item"),i=0;i<n.length;i++){var l=e+"howIt"+t+"."+(i+1)+".png";n[i].src=l}}(),function(){e.querySelector(".slider__arrowL").addEventListener("click",function(){if(1==r.currentValue)return r.currentValue=r.sliderLength,r.currentPos-=r.itemWidth*(r.sliderLength-1),r.list.style.left=r.currentPos+"px",this;r.currentPos+=r.itemWidth,r.list.style.left=r.currentPos+"px",r.currentValue--})}(),function(){e.querySelector(".slider__arrowR").addEventListener("click",function(){if(r.currentValue==r.sliderLength)return r.currentValue=1,r.currentPos+=r.itemWidth*(r.sliderLength-1),r.list.style.left=r.currentPos+"px",this;r.currentPos-=r.itemWidth,r.list.style.left=r.currentPos+"px",r.currentValue++})}()}function t(){var e=document.querySelector(".activity-search__input");e.value&&r(e.value)}function r(e){var t=l();t.open("POST","https://pixabay.com/api/?key=4845683-933d895de826e8c128c7c84b3&per_page=7&q="+e,!0),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?n(JSON.parse(t.responseText)):console.log("No access bla bla. Slow down please"))},t.send(null)}function n(e){if(!i(e))return!1;var t=document.querySelector(".grid"),r=document.getElementById("grid").innerHTML,n=e.hits.map(function(e){return{link:e.webformatURL,word:e.user}}),l=tmpl(r,{data:n});t.innerHTML=l;new Masonry(t,{itemSelector:".grid__img",columnWidth:".columnWidth",gutter:20,percentPosition:!0});o()}function i(e){function t(e){var t=document.createElement("p");return t.classList.add("noResults"),t.innerText="Sorry, no results found",e.appendChild(t),!0}function r(e){if(e.childNodes.length){var t=e.lastChild;do{e.removeChild(t),t=e.lastChild}while(t);return!0}return!1}return function(e){var n=document.querySelector(".grid");if(e.total)return r(n),!0;if(n.childNodes.length>1){r(n),t(n);new Masonry(n,{itemSelector:".grid__img",columnWidth:".columnWidth",gutter:20,percentPosition:!0})}else 1!=n.childNodes.length&&t(n);return!1}(e)}function l(){var e=void 0;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e||"undefined"==typeof XMLHttpRequest||(e=new XMLHttpRequest),e}function o(){for(var e=document.querySelectorAll(".grid__mask"),t=0;t<e.length;t++)e[t].parentNode.addEventListener("mouseenter",function(){this.querySelector(".grid__mask").style.display="none",this.querySelector(".grid__info").style.display="none"}),e[t].parentNode.addEventListener("mouseleave",function(){this.querySelector(".grid__mask").style.display="inline-block",this.querySelector(".grid__info").style.display="inline-block"}),e[t].parentNode.addEventListener("click",function(){var e=this.getAttribute("data-src"),t=document.getElementById("mask").innerHTML,r=document.getElementById("pagewrap"),n=document.createElement("div");n.classList.add("mask-wrapper");var i=tmpl(t,{data:e});n.innerHTML=i,r.appendChild(n),n.addEventListener("click",function(e){if("IMG"==e.target.tagName)return!1;r.removeChild(this)})})}for(var c=document.querySelectorAll("a"),s=0;s<c.length;s++)c[s].onclick=function(){return!1};document.querySelector(".header__findBtn").addEventListener("click",function(e){for(var t=0,r=0,n=document.querySelector(".partners");null!=n;)t+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;window.scrollTo(t,r)});for(var d=document.querySelectorAll(".slider"),a=0;a<d.length;a++){var u=document.createElement("p"),h=document.createElement("p");u.classList.add("slider__arrowR"),h.classList.add("slider__arrowL"),d[a].appendChild(h),d[a].appendChild(u),new e(d[a],a+1)}!function(){var e=["Marshal","Wellnes and Health","Extreme  Sports and Expeditions","Fender","Culture and Edution","Les Paul","Relaxation","Travelling"];r(e[Math.floor(Math.random()*e.length)])}(),document.querySelector(".activity-search__btn").addEventListener("click",t),document.querySelector(".activity-search__input").addEventListener("keydown",function(e){13==e.keyCode&&(e.preventDefault(),t())})};