"use strict";window.onload=function(){function e(e,t){var n=this;this.currentValue=1,this.list=e.querySelector(".slider__list"),this.sliderLength=e.querySelectorAll(".slider__item").length,this.itemWidth=300,this.currentPos=0,function(){var e=n.sliderLength*n.itemWidth;n.list.style.width=e+"px"}(),function(){for(var e="images/sliders/slider"+t+"/",r=n.list.querySelectorAll(".slider__item"),i=0;i<r.length;i++){var o=e+"howIt"+t+"."+(i+1)+".png";r[i].src=o}}(),function(){e.querySelector(".slider__arrowL").addEventListener("click",function(){if(1==n.currentValue)return n.currentValue=n.sliderLength,n.currentPos-=n.itemWidth*(n.sliderLength-1),n.list.style.left=n.currentPos+"px",this;n.currentPos+=n.itemWidth,n.list.style.left=n.currentPos+"px",n.currentValue--})}(),function(){e.querySelector(".slider__arrowR").addEventListener("click",function(){if(n.currentValue==n.sliderLength)return n.currentValue=1,n.currentPos+=n.itemWidth*(n.sliderLength-1),n.list.style.left=n.currentPos+"px",this;n.currentPos-=n.itemWidth,n.list.style.left=n.currentPos+"px",n.currentValue++})}()}function t(){var e=document.querySelector(".activity-search__input");e.value&&n(e.value)}function n(e){var t=o();t.open("POST","https://pixabay.com/api/?key=4845683-933d895de826e8c128c7c84b3&per_page=7&q="+e,!0),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?r(JSON.parse(t.responseText)):console.log("No access bla bla. Slow down please"))},t.send(null)}function r(e){if(!i(e))return!1;var t=document.querySelector(".grid"),n=document.getElementById("grid").innerHTML,r=e.hits.map(function(e){return{link:e.webformatURL,word:e.user}}),o=tmpl(n,{data:r});t.innerHTML=o;new Masonry(t,{itemSelector:".grid__img",columnWidth:".columnWidth",gutter:20,percentPosition:!0});d()}function i(e){function t(e){var t=document.createElement("p");return t.classList.add("noResults"),t.innerText="Sorry, no results found",e.appendChild(t),!0}function n(e){if(e.childNodes.length){var t=e.lastChild;do{e.removeChild(t),t=e.lastChild}while(t);return!0}return!1}return function(e){var r=document.querySelector(".grid");if(e.total)return n(r),!0;if(r.childNodes.length>1){n(r),t(r);new Masonry(r,{itemSelector:".grid__img",columnWidth:".columnWidth",gutter:20,percentPosition:!0})}else 1!=r.childNodes.length&&t(r);return!1}(e)}function o(){var e=void 0;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e||"undefined"==typeof XMLHttpRequest||(e=new XMLHttpRequest),e}function d(){for(var e=document.querySelectorAll(".grid__mask"),t=0;t<e.length;t++)e[t].parentNode.addEventListener("mouseenter",function(){this.querySelector(".grid__mask").style.display="none",this.querySelector(".grid__info").style.display="none"}),e[t].parentNode.addEventListener("mouseleave",function(){this.querySelector(".grid__mask").style.display="inline-block",this.querySelector(".grid__info").style.display="inline-block"}),e[t].parentNode.addEventListener("click",function(){var e=this.getAttribute("data-src"),t=document.getElementById("mask").innerHTML,n=document.getElementById("pagewrap"),r=document.createElement("div");r.classList.add("mask-wrapper");var i=tmpl(t,{data:e});r.innerHTML=i,n.appendChild(r),r.addEventListener("click",function(e){if("IMG"==e.target.tagName)return!1;n.removeChild(this)})})}for(var l=document.querySelectorAll("a"),c=0;c<l.length;c++)l[c].onclick=function(){return!1};!function(){document.querySelector(".header__logIn").addEventListener("click",function(n){document.querySelector(".header-window--logIn").style.display="block",window.addEventListener("keydown",e),document.querySelector(".header-window--logIn").addEventListener("click",function(e){e.target.classList.contains("header-window__mask")&&t()})}),document.querySelector(".header-window__logInBtn").addEventListener("click",function(e){e.preventDefault()}),document.querySelector(".header-window__cancelBtn--logIn").addEventListener("click",function(n){t(),window.removeEventListener("keydown",e)});var e=function(e){27==e.keyCode&&(e.preventDefault(),t())},t=function(){document.querySelector(".header-window--logIn").style.display="none"}}(),function(){document.querySelector(".header__signUp").addEventListener("click",function(n){document.querySelector(".header-window--signUp").style.display="block",window.addEventListener("keydown",e),document.querySelector(".header-window--signUp").addEventListener("click",function(e){e.target.classList.contains("header-window__mask--signUp")&&t()})}),document.querySelector(".header-window__signUpBtn--signUp").addEventListener("click",function(e){e.preventDefault()}),document.querySelector(".header-window__cancelBtn--signUp").addEventListener("click",function(n){t(),window.removeEventListener("keydown",e)});var e=function(e){27==e.keyCode&&(e.preventDefault(),t())},t=function(){document.querySelector(".header-window--signUp").style.display="none"}}(),document.querySelector(".header__findBtn").addEventListener("click",function(e){for(var t=0,n=0,r=document.querySelector(".partners");null!=r;)t+=r.offsetLeft,n+=r.offsetTop,r=r.offsetParent;window.scrollTo(t,n)});for(var s=document.querySelectorAll(".slider"),a=0;a<s.length;a++){var u=document.createElement("p"),h=document.createElement("p");u.classList.add("slider__arrowR"),h.classList.add("slider__arrowL"),s[a].appendChild(h),s[a].appendChild(u),new e(s[a],a+1)}!function(){var e=["Marshal","Wellnes and Health","Extreme  Sports and Expeditions","Fender","Culture and Edution","Les Paul","Relaxation","Travelling"];n(e[Math.floor(Math.random()*e.length)])}(),document.querySelector(".activity-search__btn").addEventListener("click",t),document.querySelector(".activity-search__input").addEventListener("keydown",function(e){13==e.keyCode&&(e.preventDefault(),t())})};